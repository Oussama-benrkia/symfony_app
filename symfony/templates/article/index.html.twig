{% extends 'layout.html.twig' %}

{% block title %}Articles{% endblock %}

{% block content %}
<main class="container mx-auto p-4">
    <h1 class="text-2xl font-bold mb-4">Liste des Articles</h1>
    
    <form action="" method="GET" class="flex space-x-4 mb-4">
        <div class="relative border-2 border-gray-100 rounded-lg flex-1">
           
            <input
                type="text"
                name="search"
                value="{{search}}"
                class="h-14 w-full pl-10 pr-4 rounded-lg z-0 focus:shadow focus:outline-none"
                placeholder="Rechercher un article..."
            />
        </div>
        
        <select name="category" class="h-14 border-2 border-gray-100 rounded-lg px-4 focus:outline-none">
            <option value="">Toutes les cat√©gories</option>
            <optgroup label="Categories">
            {% for item in ctg %}
                <option value="ctg-{{item.id}}">
                            {{item.name}}
                        </option>
            {% endfor %}
                    </optgroup>
             <optgroup label="tags">
            {% for item in tag %}
                <option value="tgs-{{item.id}}">
                            {{item.name}}
                        </option>
            {% endfor %}
                    </optgroup>
             <optgroup label="Difficulty levels">
            {% for item in dif %}
                <option value="dfl-{{item.id}}">
                            {{item.name}}
                        </option>
            {% endfor %}
                    </optgroup>
        </select>
        
        <div class="flex space-x-2">
            <button
                type="submit"
                class="h-14 px-6 text-white rounded-lg bg-red-500 hover:bg-red-600"
            >
                Rechercher
            </button>
            <a href="{{path('app_posts')}}"
                class="h-14 px-6 text-white rounded-lg bg-gray-500 hover:bg-gray-600 flex items-center justify-center"
            >
                Effacer
            </a>
        </div>
    </form>
    
    <ul class="space-y-2">
        {% for post in data %}
            <li class="p-4 bg-gray-100 rounded-lg shadow">
                <a href="{{ post.link }}" class="text-lg text-blue-600 hover:underline">
                    {{ post.title.rendered|raw }}
                </a>
            </li>
        {% endfor %}
    </ul>
</main>
{% endblock %}